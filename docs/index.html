---

title: Machine Learning nbdev template


keywords: fastai
sidebar: home_sidebar

summary: "Template for development of machine learning packages using nbdev"
description: "Template for development of machine learning packages using nbdev"
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Clone this repository to start any new project or package development</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Install">Install<a class="anchor-link" href="#Install"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Activate-conda-environment">Activate conda environment<a class="anchor-link" href="#Activate-conda-environment"> </a></h2><p>Run</p>

<pre><code>conda deactivate
conda create --name nbdev
conda activate nbdev</code></pre>
<p>Now install nbdev and fastcore</p>

<pre><code>pip install nbdev
pip install fastcore</code></pre>
<h3 id="Additional-environments">Additional environments<a class="anchor-link" href="#Additional-environments"> </a></h3><p>Download ymls from envs directory in <a href="https://github.com/asrishaheem/segmentation/">https://github.com/asrishaheem/segmentation/</a></p>
<ul>
<li>This contains envs directory with some yaml files</li>
<li>These will create an env called nbdev (change as needed</li>
<li>Previously, it was found that nbdev is better stalled using pip</li>
</ul>

<pre><code>conda env update --file envs/ml-base.yml
conda env update --file envs/jupyter.yml</code></pre>
<p>And choose from the following as needed</p>

<pre><code>conda env update --file envs/pytorch.yml
conda env update --file envs/mlflow.yml
conda env update --file envs/tensorflow.yml
conda env update --file envs/dvc.yml</code></pre>
<p>And activate the environment</p>

<pre><code>conda activate nbdev</code></pre>
<p>Ensure reccomended jupyter extensions are enabled</p>

<pre><code>jupyter nbextensions_configurator enable --user
jupyter contrib nbextension install --user
jupyter notebook</code></pre>
<p>Navigate to <a href="http://localhost:8888/nbextensions">nbextensions</a> and check that Table of Contents 2 and collapsable headings are enabled.</p>
<p>Exit jupyter notebook (CTRL+C)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-new-nbdev-project">Create new nbdev project<a class="anchor-link" href="#Create-new-nbdev-project"> </a></h2><ul>
<li>Note the project name "new_project" must only use underscore and must not begin with a number</li>
<li>Basically, you should be able to name a python variable with this string</li>
</ul>

<pre><code>conda activate nbdev</code></pre>

<pre><code>cd root/directory/for/new_project
nbdev_new new_project
cd new_project</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Edit-settings.ini">Edit settings.ini<a class="anchor-link" href="#Edit-settings.ini"> </a></h2>
<pre><code>code .</code></pre>
<p>Change the following</p>
<ul>
<li>Make sure th change lib_name to the name of the new project</li>
<li>Replace all between user and branch as follows</li>
</ul>

<pre><code>[DEFAULT]
lib_name = new_project
user = asrishaheem
description = asrishaheem
keywords = asrishaheem
author = asrishaheem
author_email = asrishaheem@gmail.com
copyright = asrishaheem
branch = master
conda_requirements = numpy</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-new-repository-on-github">Create new repository on github<a class="anchor-link" href="#Create-new-repository-on-github"> </a></h2>
<pre><code>gh repo create new_project</code></pre>
<ul>
<li>Select private</li>
<li>Y</li>
</ul>
<p>Make first commit</p>

<pre><code>git add .
git commit -m "First commit"
git push --set-upstream origin master</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Set-up-project">Set up project<a class="anchor-link" href="#Set-up-project"> </a></h2><h3 id="Housekeeping-(needed-on-my-pc)">Housekeeping (needed on my pc)<a class="anchor-link" href="#Housekeeping-(needed-on-my-pc)"> </a></h3>
<pre><code>mkdir ./docs/_data
sed -i 's/your_lib/new_project/g' index.ipynb</code></pre>
<h3 id="Install-webhooks">Install webhooks<a class="anchor-link" href="#Install-webhooks"> </a></h3>
<pre><code>nbdev_install_git_hooks</code></pre>
<h3 id="Run-nbdev-tests">Run nbdev tests<a class="anchor-link" href="#Run-nbdev-tests"> </a></h3>
<pre><code>nbdev_build_lib
nbdev_update_lib
nbdev_test_nbs
nbdev_read_nbs
nbdev_build_docs</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Trouble-shoot">Trouble shoot<a class="anchor-link" href="#Trouble-shoot"> </a></h3><p>If build docs fails try:</p>

<pre><code>pip uninstall nbdev
pip install nbdev</code></pre>
<p>If it still fails try</p>

<pre><code>conda remove nbconvert
conda install nbconvert=5.6.1</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Check-that-project-installs">Check that project installs<a class="anchor-link" href="#Check-that-project-installs"> </a></h3>
<pre><code>pip install -e .</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Run-jupyter">Run jupyter<a class="anchor-link" href="#Run-jupyter"> </a></h2>
<pre><code>jupyter notebook</code></pre>
<ul>
<li><p>Log into notebook (might be serving at different port than 8888 if another jupyter is arleady running)</p>
</li>
<li><p>Edit/create new packages as needed</p>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hello_world</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Hello World
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

